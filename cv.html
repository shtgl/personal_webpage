<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shashwat's CV</title>
  <link rel="icon" type="image/x-icon" href="images/cv.png">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Custom Cursor -->
  <div class="cursor"></div>

  <!-- Navbar -->
  <nav class="navbar" role="navigation" aria-label="Main navigation">
    <a class="home" href="index.html" id="homeLink" title="Homepage">Home</a>
    <a class="email" href="mailto:shwatgal@gmail.com" target="_blank" title="Email">Email</a>
    <a class="linkedin" href="https://in.linkedin.com/in/shsinghal" target="_blank" title="LinkedIn">LinkedIn</a>
    <a class="git" href="https://github.com/shtgl" target="_blank" title="GitHub">GitHub</a>
  </nav>

  <!-- Page Transition Overlay (same style as index.html) -->
  <div class="page-overlay" id="pageOverlay">
    <div class="loader"></div>
  </div>

  <!-- Embedded CV -->
  <object data="cv/Resume-Shashwat_Singhal.pdf" type="application/pdf" title="Embedded PDF Viewer">
    Your browser does not support PDFs. 
    <a href="cv/Resume-Shashwat_Singhal.pdf" target="_blank">Download PDF</a>.
  </object>

  <!-- Email Modal -->
  <div class="email-modal" id="emailModal">
    <div class="email-content">
      <h2>Choose Your Email Service</h2>
      <p>Select how you’d like to send me an email:</p>
      <div class="email-options">
        <button class="email-gateway" data-service="gmail"> Gmail</button>
        <button class="email-gateway" data-service="outlook"> Outlook</button>
        <button class="email-gateway" data-service="yahoo"> Yahoo</button>
        <button id="closeModal">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    /* === Cursor === */
    const cursor = document.querySelector('.cursor');
    document.addEventListener('mousemove', e => {
      cursor.style.left = e.clientX + 'px';
      cursor.style.top = e.clientY + 'px';
    });
    document.querySelectorAll('a, button').forEach(el => {
      el.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
      el.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
    });
    document.addEventListener('mousedown', () => cursor.classList.add('clicked'));
    document.addEventListener('mouseup', () => cursor.classList.remove('clicked'));

    /* === Page Transition for Home Link === */
    const homeLink = document.getElementById('homeLink');
    const overlay = document.getElementById('pageOverlay');

    homeLink.addEventListener('click', (e) => {
      e.preventDefault();
      overlay.classList.add('active');

      // navigate after fade-in animation
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 400);
    });

    /* === Fade-in effect when CV loads === */
    window.addEventListener('load', () => {
      document.body.style.opacity = 0;
      setTimeout(() => {
        document.body.style.transition = 'opacity 0.6s ease';
        document.body.style.opacity = 1;
      }, 50);
    });

    const emailBtn = document.querySelector('.email');
    const emailModal = document.getElementById('emailModal');
    const closeModal = document.getElementById('closeModal');
    const gatewayButtons = document.querySelectorAll('.email-gateway');

    // open modal
    emailBtn.addEventListener('click', e => {
      e.preventDefault();
      emailModal.classList.add('active');
    });

    // close modal
    closeModal.addEventListener('click', () => {
      emailModal.classList.remove('active');
    });

    // open chosen email service
    gatewayButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const service = btn.getAttribute('data-service');
        const email = "shwatgal@gmail.com";
        const subject = encodeURIComponent("Hello Shashwat!");
        const body = encodeURIComponent("Hi Shashwat,\n\nI came across your portfolio and wanted to reach out to you.\n\nBest regards,\n[Your Name]");
        
        let url = "";

        if (service === "gmail") {
          url = `https://mail.google.com/mail/?view=cm&fs=1&to=${email}&su=${subject}&body=${body}`;
        } else if (service === "outlook") {
          url = `https://outlook.live.com/mail/0/deeplink/compose?to=${email}&subject=${subject}&body=${body}`;
        } else if (service === "yahoo") {
          url = `https://compose.mail.yahoo.com/?to=${email}&subject=${subject}&body=${body}`;
        }

        if (url) {
          // ✅ open as a smaller popup
          const popupWidth = 800;
          const popupHeight = 700;
          const left = (screen.width / 2) - (popupWidth / 2);
          const top = (screen.height / 2) - (popupHeight / 2);
          
          window.open(
            url,
            "emailCompose",
            `width=${popupWidth},height=${popupHeight},top=${top},left=${left},resizable=yes,scrollbars=yes,status=no`
          );
          
          emailModal.classList.remove('active');
        }
      });
    });
  </script>
</body>
</html>
